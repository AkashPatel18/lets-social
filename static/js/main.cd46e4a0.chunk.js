(this["webpackJsonpinsta2.0"]=this["webpackJsonpinsta2.0"]||[]).push([[0],{37:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n(18),a=n.n(s),r=n(10),o=n(2),i=Object(c.createContext)(),l=function(e){var t=Object(c.useState)(null),n=Object(r.a)(t,2),s=n[0],a=n[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(i.Provider,{value:{user:[s,a]},children:e.children})})},j=n(25),u=n.n(j),d=(n(37),n(14)),b=d.a.initializeApp({apiKey:"AIzaSyAbaKLU4-S_zImzRgLZiCL8yvpoCDwG3u0",authDomain:"insta2-c1959.firebaseapp.com",projectId:"insta2-c1959",storageBucket:"insta2-c1959.appspot.com",messagingSenderId:"803612702424",appId:"1:803612702424:web:61c1c99be42b2ebde189ad"}).firestore(),p=d.a.auth(),h=d.a.storage(),m=new d.a.auth.GoogleAuthProvider;var O=function(){var e=Object(r.a)(Object(c.useContext)(i).user,2),t=e[0],n=(e[1],Object(c.useState)("")),s=Object(r.a)(n,2),a=s[0],l=s[1],j=Object(c.useState)(null),p=Object(r.a)(j,2),m=p[0],O=p[1],f=Object(c.useState)(0),g=Object(r.a)(f,2),x=g[0],v=g[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"createPost",children:t?Object(o.jsxs)("div",{className:"post",children:[Object(o.jsx)("p",{children:"Create A Post"}),Object(o.jsx)("div",{className:"post_div",children:Object(o.jsx)("textarea",{className:"textarea",rows:"5",value:a,placeholder:"enter caption ...",onChange:function(e){return l(e.target.value)}})}),Object(o.jsx)("div",{className:"image_preview",children:Object(o.jsx)("img",{id:"image_preview",alt:"",value:m})}),Object(o.jsxs)("div",{className:"post_bottom",children:[Object(o.jsxs)("div",{className:"image_upload_post",children:[Object(o.jsx)("label",{htmlFor:"fileInput",children:Object(o.jsx)(u.a,{style:{cursor:"pointer",fontSize:"20px"}})}),Object(o.jsx)("input",{type:"file",id:"fileInput",accept:"image/*",onChange:function(e){if(e.target.files[0]){O(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),n=document.getElementById("image_preview");n.src=t,console.log(t),n.style.display="block"}},style:{display:"none"},name:"image"})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"post_btn",onClick:function(){if(m){var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(10);h.ref("images/".concat(e,".jpg")).put(m).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e)}),(function(){h.ref("images").child("".concat(e,".jpg")).getDownloadURL().then((function(e){b.collection("posts").add({timestamp:d.a.firestore.FieldValue.serverTimestamp(),caption:a,photoUrl:e,username:t.email.replace("@gmail.com",""),userProfileUrl:t.photoURL})})),l(""),v(0),O(null),document.getElementById("image_preview").style.display="none"}))}},style:{color:a||m?"#000":"Lightgrey"},children:"Upload ".concat(0!=x?x:"")})})]})]}):Object(o.jsx)("p",{children:" to post & comment Signin with Google"})})})},f=n(13),g=n.n(f),x=n(16),v=function(){var e=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.signInWithPopup(m).then((function(e){console.log(e.user),t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=v,_=(n(50),function(){var e=Object(r.a)(Object(c.useContext)(i).user,2),t=e[0],n=e[1],s=function(){var e=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"heading_bar",children:[Object(o.jsx)("h1",{className:"heading_h1",children:Object(o.jsx)("b",{children:"Lets Social"})}),t?Object(o.jsx)("img",{className:"user_img",src:t.photoURL,alt:""}):Object(o.jsx)("button",{onClick:s,className:"signin_btn",children:Object(o.jsx)("b",{children:"Sign in with Google"})})]})})}),w=(n(51),function(){return Object(o.jsx)("span",{className:"footer",children:Object(o.jsx)("a",{href:"https://github.com/AkashPatel18",target:"_blank",children:"Made with \u2764\ufe0f By Akash"})})}),N=(n(52),function(e){e.userprofileUrl;var t=e.username,n=e.id,s=e.photoURL,a=e.caption,l=(e.comments,e.time),j=Object(r.a)(Object(c.useContext)(i).user,2),u=j[0];j[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"post",children:[Object(o.jsx)("p",{children:t}),Object(o.jsx)("img",{src:s,alt:"",className:"post_img"}),Object(o.jsx)("p",{children:l}),Object(o.jsxs)("p",{children:[Object(o.jsx)("b",{children:t})," ",Object(o.jsx)("span",{children:a})]}),u?Object(o.jsx)("button",{onClick:function(){var e=h.refFromURL(s);e&&e.delete().then((function(){console.log("delered")})),b.collection("posts").doc(n).delete().then((function(){console.log("deleted")})),console.log(b.collection("posts").doc(n))},className:"post_delete_btn",children:"Delete"}):Object(o.jsx)("div",{})]})})}),U=(n(53),function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){b.collection("posts").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"home_feed",children:n.map((function(e){var t=e.id,n=e.post;return Object(o.jsx)(N,{id:t,photoURL:n.photoUrl,username:n.username,caption:n.caption},t)}))})})}),L=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(l,{children:[Object(o.jsx)(_,{}),Object(o.jsx)(O,{}),Object(o.jsx)(U,{}),Object(o.jsx)(w,{})]})})};n(54);a.a.render(Object(o.jsx)(L,{}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.cd46e4a0.chunk.js.map